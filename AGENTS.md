# Google Jules Agent Directives

## 1. プロジェクト概要

このリポジトリは、Google Julesプロジェクトのためのエージェント開発を行うものです。開発者はこの AGENTS.md に記載された指示に従い、効率的で品質の高い開発を心がけてください。

## 2. 環境構築

開発を始める前に、以下の手順で環境を構築してください。

- Node.js: プロジェクトで利用するNode.jsのバージョンは `.nvmrc` ファイルで定義されています。 `nvm` や `Volta` などのバージョンマネージャーを利用して、指定されたバージョンを使用してください。
- パッケージマネージャー: パッケージ管理には `pnpm` を使用します。効率的なディスク利用と高速なインストールが特徴です。
- 依存ライブラリのインストール: 以下のコマンドで必要なライブラリをインストールします。

```Bash
# nvmを利用している場合、適切なNode.jsバージョンに切り替え
nvm use

# 依存ライブラリのインストール
pnpm install
```

## 3. 主要な開発コマンド

開発サイクルで頻繁に使用するコマンドは `package.json` の `scripts` に定義されています。 `pnpm run` を介して実行してください。

```コード スニペット

"scripts": {
  "format": "prettier --write .",
  "lint": "eslint . --fix",
  "typecheck": "tsc --noEmit",
  "test": "vitest run",
  "test:watch": "vitest"
}
```

```Bash

# フォーマットの実行
pnpm run format

# 静的解析（Linter）の実行
pnpm run lint

# 型チェックの実行 (TypeScript)
pnpm run typecheck

# テストの実行
pnpm run test
```

## 4. コードスタイルガイドライン

コードの品質と一貫性を保つため、以下のガイドラインにしたがってください。

- コメントの言語: コード内のコメントは、原則として英語で記述してください。 (In principle, comments in the code should be written in English.)
- ESLintとPrettierの利用: コードの静的解析には ESLint、フォーマットには Prettier を使用します。設定はプロジェクトで統一されており、コミット前に必ず実行してください。
- 自動化の推奨: `husky` と `lint-staged` を利用して、コミット時に自動でフォーマットとLintが実行されるように設定しています。これにより、一貫性のないコードがリポジトリに含まれるのを防ぎます。
- READMEの更新: 機能追加や仕様変更があった場合は、README.md も忘れずに更新してください。

## 5. テスト手順

品質を保証するため、以下のテスト手順を遵守してください。

- テストコードの修正: プロダクトコードを修正した場合は、関連するテストコードも *必ず修正・追加* してください。テストフレームワークには `Vitest` を使用します。
- カバレッジ: テストカバレッジを意識し、主要なロジックがテストされていることを確認してください。
- 全テストのパス: プルリクエストを作成する前に、すべてのテストがパスすることを確認してください。

## 6. セキュリティに関する考慮事項

安全なアプリケーションを開発するために、以下の点に注意してください。

- 機密情報の管理: APIキーやパスワードなどの機密情報をコードにハードコーディングしないでください。環境変数 ( `.env` ファイルなど) やシークレット管理ツールを使用してください。
- 依存ライブラリの脆弱性: 定期的に依存ライブラリの脆弱性をチェックし、安全なバージョンに更新してください。

```Bash
pnpm audit
```

- 入力値の検証: 外部からの入力値（APIリクエストのボディなど）は、Zod などのライブラリを用いて常に検証（バリデーション）し、予期せぬ挙動やセキュリティホールを防いでください。
