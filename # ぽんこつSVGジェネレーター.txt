ぽんこつSVGジェネレーター (v0.2 - 選択・消去機能)

プロジェクト概要:
PoCで実装した基本機能に、**「図形の選択」と「キーボードによる消去」**機能を追加します。これにより、アプリケーションは単なる描画ツールから、基本的な編集機能を備えたエディターへと進化します。

技術スタック:
フロントエンド: React, SVG.js
バックエンド: Node.js, Express.js
ビルドツール: Vite
状態管理: React標準のuseStateフックのみを使用します。

機能要件 (変更・追加点):
1. 画面構成
基本的な3要素（キャンバス、エクスポート、クリア）は維持します。 
追加: ユーザーが図形を選択した際、その図形が選択されていることが視覚的にわかるようにしてください（例：枠線の色を青に変える）。

2. コア機能
長方形の描画
機能は維持しますが、描画時に各長方形にユニークなIDを付与するように変更してください。

状態管理
描画された長方形のデータ構造を、
{x, y, width, height} から {id: string, x: y, width: height} の配列に変更してください。 
追加: 現在選択されている図形のIDを管理するためのState（selectedShapeIdなど）を新しく定義してください。何も選択されていない場合はnullとします。

【新機能】図形の選択
キャンバス上の長方形をクリックすると、その図形が「選択状態」になります。
選択状態の図形は、枠線の色をデフォルトの黒から青 (stroke="blue") に変更して表示してください。
キャンバスの何もない領域をクリックすると、すべての図形の選択が解除されるようにしてください。

【新機能】図形の消去
図形が1つ選択されている状態で、ユーザーがキーボードのDeleteキー またはBackspaceキー を押すと、選択中の図形がキャンバスから消去されるように実装してください。

実装ステップの提案:
Jules、以下のステップで実装を進めてください。

データ構造の変更:
useStateで管理している長方形の配列について、オブジェクトにidプロパティを追加します。 
長方形を新規作成するロジック（onMouseUp時）で、Date.now() やcrypto.randomUUID() などを用いてユニークなIDを生成し、新しいオブジェクトに含めてください。

選択状態の管理:
選択中の図形のIDを保持するためのState (selectedShapeId, setSelectedShapeId) をuseState<string | null>(null) を使って定義します。

選択ロジックの実装:
描画される各 <rect> 要素にonClickイベントハンドラーを追加します。クリックされたら、その図形のidをselectedShapeIdにセットしてください。
SVGキャンバス領域（<svg> タグ）にもonClickイベントハンドラーを追加し、イベントの伝播を利用して、図形以外がクリックされた場合はselectedShapeIdをnullに設定し、選択を解除するようにします。

選択状態の視覚化:
<rect> 要素をレンダリングする際に、その図形のidが現在のselectedShapeIdと一致するかどうかを判定します。

一致する場合は 
strokeプロパティを "blue" に、一致しない場合は "black" に設定してください。 

消去ロジックの実装:
useEffectフックを使用して、キーボードのkeydownイベントを監視するイベントリスナーを登録します。
イベントリスナー内で、押されたキーがDeleteまたはBackspaceであり、かつselectedShapeIdにIDがセットされていることを確認します。
条件を満たす場合、長方形の配列からselectedShapeIdと一致するIDを持つ要素を除外した新しい配列でStateを更新してください。
図形を消去した後は、selectedShapeIdをnullにリセットするのを忘れないでください。