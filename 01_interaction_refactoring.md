# リファクタリング提案1：インタラクションロジックの統合

## 目的

マウス操作に関するロジックを一つのカスタムフックに集約することで、コードの保守性と拡張性を向上させます。
将来的に「リサイズ」や「回転」といった新しいインタラクションを追加する際に、見通しよく、かつ容易に対応できるようにすることが狙いです。

## 現状の問題点

現在、マウス操作のロジックが `useDrawing.ts` と `useDragging.ts` の2つのカスタムフックに分散しています。

- `useDrawing`: キャンバス上での図形描画操作を担当
- `useDragging`: 既存の図形のドラッグ移動操作を担当

このままでは、新しいインタラクションを追加するたびに `useXXX.ts` のようなフックが増え続け、イベント処理の全体像が把握しにくくなる可能性があります。

## 具体的なステップ

1.  **`useInteractionManager.ts` の新設**
    - `useDrawing.ts` と `useDragging.ts` の機能を統合した、新しいカスタムフック `useInteractionManager.ts` を作成します。

2.  **イベント処理の一元化**
    - この新しいフックが、`onMouseDown`, `onMouseMove`, `onMouseUp` といった主要なマウスイベントハンドラをすべて管理します。
    - `onMouseDown` イベントハンドラ内で、クリックされた対象（キャンバスか、図形か）や選択中のツールに応じて、`dispatch` するアクション (`START_DRAWING` や `START_DRAGGING`) を動的に決定します。

3.  **`App.tsx` の簡素化**
    - `App.tsx` 内の `useDrawing` と `useDragging` の呼び出しを削除し、代わりに `useInteractionManager` を一つだけ呼び出すように変更します。
    - これにより、`App.tsx` の責務が状態管理とコンポーネントの結合に集中し、よりクリーンになります。
